CREATE TABLE users (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name TEXT NOT NULL,
  username TEXT NOT NULL UNIQUE,
  password TEXT NOT NULL 
);

CREATE TABLE departments (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name TEXT NOT NULL 
);

CREATE TABLE questions (
   id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
   author INTEGER REFERENCES users(id) NOT NULL,
   question_body TEXT NOT NULL, 
   department INTEGER REFERENCES departments(id) NOT NULL, 
   created_date TIMESTAMPTZ DEFAULT now() NOT NULL,
   answered BOOLEAN
);

CREATE TABLE answers(
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  author INTEGER REFERENCES users(id) NOT NULL,
  question INTEGER REFERENCES questions(id) NOT NULL,
  answer_body TEXT NOT NULL,
  created_date TIMESTAMPTZ DEFAULT now() NOT NULL
);

CREATE TABLE question_likes (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  user_id INTEGER REFERENCES users(id) NOT NULL,
  question_id INTEGER REFERENCES questions (id) NOT NULL
);

CREATE TABLE answer_upvotes (
  id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  user_id INTEGER REFERENCES users(id) NOT NULL,
  answer_id INTEGER REFERENCES answers(id) NOT NULL
);